var gpio = require('pi-gpio');

var pin = 7;

exports.blink = function(req, res){

	blink(pin);
	res.json(200, {message: 'success'});

}



function blink(pin, interval){
	//set default value of interval
	//time between turning on and off
	if(interval == undefined) interval = 3000;
	//set default time for blinkTime
	//number of times to blink the light on and off
	//if(blinkTime == undefined) blinkTime = 2;

	writeHigh(pin);
	setTimeout(function(){writeLow(pin)}, interval);
}

function writeHigh(pin){
	console.log(pin + " high");
	gpio.open(pin, "output", function(err) {
	    gpio.write(pin, 1, function() {
	        gpio.close(pin);
	    });
	});
}

function writeLow(pin){
	console.log(pin + " low");
		gpio.open(pin, "output", function(err) {
	    gpio.write(pin, 0, function() {
	        gpio.close(pin);			
	    });
	});
}


